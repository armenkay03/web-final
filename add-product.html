<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management - Manage Products</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.2);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }

        .close-button {
            color: red;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <h1>Inventory Management System</h1>
        <br>
        <nav>

            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="manage-product.html">Manage</a></li>
                <li><a href="report.html">Report</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h2>Manage Products</h2>
        <div class="form-container">
            <div class="form-box">
                <h3>Add a New Product</h3>
                <form id="add-product-form">
                    <input type="hidden" name="action" value="add">
                    <div class="form-group">
                        <label for="product-id">Product ID:</label>
                        <input type="number" id="product-id" name="product_id" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="product-name">Product Name:</label>
                        <input type="text" id="product-name" name="product_name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="product-description">Description:</label>
                        <textarea id="product-description" name="product_description" class="form-control" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="product-price">Price:</label>
                        <input type="text" id="product-price" name="product_price" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="product-quantity">Quantity:</label>
                        <input type="number" id="product-quantity" name="product_quantity" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="product-date">Date:</label>
                        <input type="date" id="product-date" name="product_date" class="form-control" required>
                    </div>
                    <button type="submit" class="btn">Add Product</button>
                </form>
            </div>

            <div class="form-box">
                <h3>Update a Product</h3>
                <form id="update-product-form">
                    <input type="hidden" name="action" value="update">
                    <div class="form-group">
                        <label for="update-product-id">Product ID (Required):</label>
                        <input type="number" id="update-product-id" name="update_product_id" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="update-description">New Description (Optional):</label>
                        <textarea id="update-description" name="update_description" class="form-control"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="update-price">New Price (Optional):</label>
                        <input type="text" id="update-price" name="update_price" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="update-quantity">New Quantity (Optional):</label>
                        <input type="number" id="update-quantity" name="update_quantity" class="form-control" min="0">
                    </div>
                    <div class="form-group">
                        <label for="update-date">New Date (Optional):</label>
                        <input type="date" id="update-date" name="update_date" class="form-control">
                    </div>
                    <button type="submit" class="btn">Update Product</button>
                </form>
            </div>

            <div class="form-box">
                <h3>Delete a Product</h3>
                <form id="delete-product-form">
                    <input type="hidden" name="action" value="delete">
                    <div class="form-group">
                        <label for="delete-product-id">Product ID (Required):</label>
                        <input type="number" id="delete-product-id" name="delete_product_id" class="form-control" required>
                    </div>
                    <button type="submit" class="btn">Delete Product</button>
                </form>
            </div>
        </div>
    </main>
<br>
<br>
<br>

    <footer>
        <p>&copy; 2024 Inventory Management System. All rights reserved.</p>
    </footer>

    <div id="response-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modal-message"></p>
        </div>
    </div>

    <script src="scripts.js"></script>
    <script>
        var modal = document.getElementById("response-modal");
        var span = document.getElementsByClassName("close-button")[0];

        span.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        function showModal(message) {
            document.getElementById("modal-message").innerText = message;
            modal.style.display = "block";
        }

        document.getElementById("add-product-form").onsubmit = function(event) {
            event.preventDefault();
            var formData = new FormData(this);

            fetch('product-management.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                showModal(data);
            })
            .catch(error => {
                showModal("Error: " + error.message);
            });
        };

        document.getElementById("update-product-form").onsubmit = function(event) {
            event.preventDefault();
            var formData = new FormData(this);

            // Remove empty fields from the formData (only send filled inputs)
            for (var pair of formData.entries()) {
                if (!pair[1]) { // if the value is empty, delete it
                    formData.delete(pair[0]);
                }
            }

            fetch('product-management.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                showModal(data);
            })
            .catch(error => {
                showModal("Error: " + error.message);
            });
        };

        document.getElementById("delete-product-form").onsubmit = function(event) {
            event.preventDefault();
            var formData = new FormData(this);

            fetch('product-management.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                showModal(data);
            })
            .catch(error => {
                showModal("Error: " + error.message);
            });
        };
    </script>
</body>
</html>
